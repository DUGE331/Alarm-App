<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alarm App</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #87CEEB 0%, #B0E0E6 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            width: 100%;
            max-width: 400px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .alarm-card {
            background: #f8f9fa;
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 20px;
            border: 1px solid #e9ecef;
        }

        .time-setting {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-bottom: 20px;
        }

        .time-select {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 12px 16px;
            font-size: 20px;
            font-weight: 600;
            color: #333;
            cursor: pointer;
            transition: all 0.3s ease;
            appearance: none;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 12px center;
            background-repeat: no-repeat;
            background-size: 16px;
            padding-right: 40px;
            min-width: 80px;
            text-align: center;
        }

        .time-select:focus {
            outline: none;
            border-color: #007AFF;
            box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.1);
        }

        .time-separator {
            font-size: 24px;
            font-weight: 600;
            color: #333;
            margin: 0 4px;
        }

        .ampm-select {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 12px 16px;
            font-size: 18px;
            font-weight: 600;
            color: #333;
            cursor: pointer;
            transition: all 0.3s ease;
            appearance: none;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 12px center;
            background-repeat: no-repeat;
            background-size: 16px;
            padding-right: 40px;
        }

        .ampm-select:focus {
            outline: none;
            border-color: #007AFF;
            box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.1);
        }

        .sound-dropdown {
            width: 100%;
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 12px 16px;
            font-size: 16px;
            color: #333;
            cursor: pointer;
            transition: all 0.3s ease;
            appearance: none;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 12px center;
            background-repeat: no-repeat;
            background-size: 16px;
            padding-right: 40px;
            margin-bottom: 20px;
        }

        .sound-dropdown:focus {
            outline: none;
            border-color: #007AFF;
            box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.1);
        }

        .control-buttons {
            display: flex;
            gap: 12px;
            justify-content: center;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 80px;
        }

        .btn-primary {
            background: #007AFF;
            color: white;
        }

        .btn-primary:hover {
            background: #0056b3;
        }

        .btn-primary:active {
            transform: scale(0.95);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .btn-secondary:active {
            transform: scale(0.95);
        }

        .btn-test {
            background: #28a745;
            color: white;
        }

        .btn-test:hover {
            background: #218838;
        }

        .btn-test:active {
            transform: scale(0.95);
        }

        .alarm-active {
            border: 2px solid #007AFF;
            background: rgba(0, 122, 255, 0.05);
        }

        .alarm-triggered {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            display: none;
        }

        .alarm-modal {
            background: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            max-width: 300px;
            animation: modalPulse 1s infinite;
        }

        @keyframes modalPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .alarm-modal h2 {
            color: #007AFF;
            margin-bottom: 20px;
            font-size: 28px;
        }

        .alarm-modal .time-display {
            font-size: 24px;
            font-weight: 600;
            color: #333;
            margin-bottom: 20px;
        }

        .dismiss-button {
            background: #dc3545;
            color: white;
            border: none;
            padding: 16px 32px;
            border-radius: 25px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .dismiss-button:hover {
            background: #c82333;
        }

        .add-alarm-btn {
            width: 100%;
            padding: 16px;
            background: #007AFF;
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 20px;
        }

        .add-alarm-btn:hover {
            background: #0056b3;
        }

        .add-alarm-btn:active {
            transform: scale(0.98);
        }

        .no-alarms {
            text-align: center;
            color: #666;
            font-size: 16px;
            padding: 40px 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <button class="add-alarm-btn" onclick="showAlarmForm()">+ Add Alarm</button>
        
        <div id="alarmsList">
            <div class="no-alarms">No alarms set</div>
        </div>
    </div>

    <div class="alarm-triggered" id="alarmModal">
        <div class="alarm-modal">
            <h2>ðŸ”” Wake Up!</h2>
            <div class="time-display" id="modalTime"></div>
            <button class="dismiss-button" onclick="dismissAlarm()">Dismiss</button>
        </div>
    </div>

    <script>
        let alarms = [];
        let alarmInterval = null;
        let currentAlarmAudio = null;

        function showAlarmForm() {
            const alarmsList = document.getElementById('alarmsList');
            
            // Remove no-alarms message
            const noAlarmsMsg = alarmsList.querySelector('.no-alarms');
            if (noAlarmsMsg) {
                noAlarmsMsg.remove();
            }
            
            const alarmCard = document.createElement('div');
            alarmCard.className = 'alarm-card';
            
            // Generate hour options (1-12)
            let hourOptions = '';
            for (let i = 1; i <= 12; i++) {
                hourOptions += `<option value="${i}" ${i === 7 ? 'selected' : ''}>${i}</option>`;
            }
            
            // Generate minute options (0-59)
            let minuteOptions = '';
            for (let i = 0; i <= 59; i++) {
                const minute = i.toString().padStart(2, '0');
                minuteOptions += `<option value="${i}" ${i === 0 ? 'selected' : ''}>${minute}</option>`;
            }
            
            alarmCard.innerHTML = `
                <div class="time-setting">
                    <select class="time-select" id="hourSelect">
                        ${hourOptions}
                    </select>
                    <span class="time-separator">:</span>
                    <select class="time-select" id="minuteSelect">
                        ${minuteOptions}
                    </select>
                    <select class="ampm-select" id="ampmSelect">
                        <option value="AM">AM</option>
                        <option value="PM">PM</option>
                    </select>
                </div>
                
                <select class="sound-dropdown" id="soundSelect">
                    <option value="countryside">UK Countryside</option>
                </select>
                
                <div class="control-buttons">
                    <button class="btn btn-test" onclick="testSound(this)">Test</button>
                    <button class="btn btn-primary" onclick="saveAlarm(this)">Save</button>
                    <button class="btn btn-secondary" onclick="cancelAlarm(this)">Cancel</button>
                </div>
            `;
            
            alarmsList.appendChild(alarmCard);
        }

        function testSound(button) {
            const audio = new Audio('sounds/countryside.mp3');
            audio.play().catch(error => {
                console.log('Error playing sound:', error);
            });
        }

        function saveAlarm(button) {
            const card = button.closest('.alarm-card');
            const hour = parseInt(card.querySelector('#hourSelect').value);
            const minute = parseInt(card.querySelector('#minuteSelect').value);
            const ampm = card.querySelector('#ampmSelect').value;
            const sound = card.querySelector('#soundSelect').value;
            
            const alarm = {
                id: Date.now(),
                hour: hour,
                minute: minute,
                ampm: ampm,
                sound: sound,
                active: true
            };
            
            alarms.push(alarm);
            displayAlarm(alarm, card);
            startAlarmCheck();
        }

        function cancelAlarm(button) {
            const card = button.closest('.alarm-card');
            card.remove();
            
            // Show no alarms message if list is empty
            const alarmsList = document.getElementById('alarmsList');
            if (alarmsList.children.length === 0) {
                alarmsList.innerHTML = '<div class="no-alarms">No alarms set</div>';
            }
        }

        function displayAlarm(alarm, card) {
            const displayHour = alarm.hour.toString().padStart(2, '0');
            const displayMinute = alarm.minute.toString().padStart(2, '0');
            const soundName = 'UK Countryside';
            
            card.innerHTML = `
                <div class="time-setting">
                    <span style="font-size: 28px; font-weight: 600; color: #333;">
                        ${displayHour}:${displayMinute} ${alarm.ampm}
                    </span>
                </div>
                <div style="text-align: center; margin-bottom: 20px; color: #666;">
                    ${soundName}
                </div>
                <div class="control-buttons">
                    <button class="btn btn-secondary" onclick="deleteAlarm(${alarm.id}, this)">Delete</button>
                    <button class="btn ${alarm.active ? 'btn-secondary' : 'btn-primary'}" onclick="toggleAlarm(${alarm.id}, this)">
                        ${alarm.active ? 'Turn Off' : 'Turn On'}
                    </button>
                </div>
            `;
            
            if (alarm.active) {
                card.classList.add('alarm-active');
            }
        }

        function deleteAlarm(id, button) {
            alarms = alarms.filter(alarm => alarm.id !== id);
            button.closest('.alarm-card').remove();
            
            // Show no alarms message if list is empty
            const alarmsList = document.getElementById('alarmsList');
            if (alarmsList.children.length === 0) {
                alarmsList.innerHTML = '<div class="no-alarms">No alarms set</div>';
            }
            
            if (alarms.length === 0) {
                stopAlarmCheck();
            }
        }

        function toggleAlarm(id, button) {
            const alarm = alarms.find(a => a.id === id);
            if (alarm) {
                alarm.active = !alarm.active;
                const card = button.closest('.alarm-card');
                
                if (alarm.active) {
                    card.classList.add('alarm-active');
                    button.textContent = 'Turn Off';
                    button.className = 'btn btn-secondary';
                    startAlarmCheck();
                } else {
                    card.classList.remove('alarm-active');
                    button.textContent = 'Turn On';
                    button.className = 'btn btn-primary';
                }
            }
        }

        function startAlarmCheck() {
            if (alarmInterval) return;
            
            alarmInterval = setInterval(() => {
                const now = new Date();
                const currentHour = now.getHours();
                const currentMinute = now.getMinutes();
                const currentSecond = now.getSeconds();
                
                // Convert to 12-hour format
                const hour12 = currentHour === 0 ? 12 : currentHour > 12 ? currentHour - 12 : currentHour;
                const ampm = currentHour < 12 ? 'AM' : 'PM';
                
                alarms.forEach(alarm => {
                    if (alarm.active && 
                        alarm.hour === hour12 && 
                        alarm.minute === currentMinute && 
                        alarm.ampm === ampm && 
                        currentSecond === 0) {
                        triggerAlarm(alarm);
                    }
                });
            }, 1000);
        }

        function stopAlarmCheck() {
            if (alarmInterval) {
                clearInterval(alarmInterval);
                alarmInterval = null;
            }
        }

        function triggerAlarm(alarm) {
            const displayHour = alarm.hour.toString().padStart(2, '0');
            const displayMinute = alarm.minute.toString().padStart(2, '0');
            
            document.getElementById('modalTime').textContent = `${displayHour}:${displayMinute} ${alarm.ampm}`;
            document.getElementById('alarmModal').style.display = 'flex';
            
            // Play countryside sound
            currentAlarmAudio = new Audio('sounds/countryside.mp3');
            currentAlarmAudio.loop = true;
            currentAlarmAudio.play().catch(error => {
                console.log('Error playing alarm sound:', error);
            });
        }

        function dismissAlarm() {
            document.getElementById('alarmModal').style.display = 'none';
            
            if (currentAlarmAudio) {
                currentAlarmAudio.pause();
                currentAlarmAudio.currentTime = 0;
                currentAlarmAudio = null;
            }
        }
    </script>
</body>
</html>